---
tags:
  - ISUCON
---

isucon用語まとめ

## thundering herd problem
キャッシュの更新中に来た大量のリクエストによって、キャッシュ更新処理が必要以上に複数回行われてしまう
nginxの`proxy_cache_lock`という設定でキャッシュの更新をしている間は同一のリクエストをブロックすることもできる

Goでは `singleflight`を使ってアプリケーションロジックで対応ができる

##  sendfile
通常、ファイルをネットワークを通じて送信する際、次のような流れになります：
1. ファイルの内容を**カーネル空間**から**ユーザー空間**にコピー
2. そのデータをユーザー空間で処理
3. ネットワークに送信するために、データを再度**カーネル空間**にコピー
しかし、このコピーの作業は無駄が多いです。そこで、**sendfile**というシステムコールを使うと、ファイルの内容をカーネル空間から直接ネットワークに送ることができ、データをユーザー空間にコピーする手間が省けます。これにより、処理が効率的になり、パフォーマンスが向上します。

## tcp_nopush
`tcp_nopush` は、データを送信する際の効率化に役立つ設定です。これを有効にすると、小さいデータを何度も送信するのではなく、ある程度まとめて送ることができ、ネットワークの効率が良くなります。

## TTL
TTLとは？
Time To Live
キャッシュが保持される時間

## カーネル空間
**カーネル空間**とは、コンピュータのOS（オペレーティングシステム）が動作している領域のことです。OSは、メモリやハードウェア（ディスクやネットワークカードなど）を管理しているので、その部分に直接アクセスできるのはカーネル（OSの核となる部分）だけです。

## バッファリングとは？
遅いクライアントがいても、nginxなどのウェブサーバーが仲介となってデータを一時待機させる
アプリケーションサーバーはnginxとデータのやりとりすることに集中すればよく、クライアントの速度の遅い早いを気にすることなくフルに仕事ができる

>nginx はリクエスト・レスポンスをそれぞれバッファリングできるので、遅いクライアントがいた場合にもアプリケーションサーバーの処理がブロックされずに処理を行えます。

## アップストリームサーバーとは？
別のサーバーにサービスを提供するサーバー→アプリケーションサーバー？
nginxの多段構成の場合もある

## 多重IO、ノンブロッキングIO、非同期IO
- **多重I/O**: 複数のI/Oを1つのスレッドで管理。どのI/Oが準備できたか確認してから処理。
- **ノンブロッキングI/O**: I/Oが完了していなくてもプログラムが停止せずに他の処理を進められる。
- **非同期I/O**: I/Oが完了するのを待たずに処理を進め、完了後に通知を受けて処理を行う。

## レイテンシ
リクエストを送ってから意味のあるコンテンツが返ってくる時間

## スループット
単位時間あたりのリクエスト処理性能

リクエスト観点でのキャパシティ
スループット

システムリソース観点でのキャパシティ
利用可能なリソース(CPU時間、メモリ容量、ネットワーク帯域)量